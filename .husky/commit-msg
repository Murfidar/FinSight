# Use tput for cross-platform color support
if [ -t 1 ]; then
  GREEN=$(tput setaf 2 || echo "")
  BLUE=$(tput setaf 4 || echo "")
  YELLOW=$(tput setaf 3 || echo "")
  RED=$(tput setaf 1 || echo "")
  NC=$(tput sgr0 || echo "") # No Color
else
  GREEN=""
  BLUE=""
  YELLOW=""
  RED=""
  NC=""
fi

print_colored() {
  printf "${2}%s${NC}\n" "$1"
}

# Validate commit message
print_colored "üîç Validating commit message..." "$YELLOW"
if ! bunx --no -- commitlint --edit "$1"; then
  print_colored "‚ùå Invalid commit message! Please follow the conventional commit format." "$RED"
  print_colored "Example:" "$RED"
  print_colored "Feat: add user authentication" "$RED"
  print_colored "Fix: resolve login issue" "$RED"
  print_colored "Docs: update README with usage instructions" "$RED"
  print_colored "For more details, see: https://www.conventionalcommits.org/" "$BLUE"
  exit 1
fi

print_colored "‚úÖ Commit message is valid!" "$GREEN"